package com.jits.shipping.routing;

import java.util.HashMap;
import java.util.Map;

import com.jits.shipping.JitsException;
import com.jits.shipping.Parcel;
import com.jits.shipping.ShippingMethod;
import com.jits.shipping.Warehouse;

public abstract class Router {
	
	static Map<String, Coordinate> zipcodeMap = new HashMap<String, Coordinate>(29500);

	public abstract Location locateByZip(String zipcode) throws JitsException;

	abstract void determineRoute(Parcel parcel) throws JitsException;

	public static void route(Parcel parcel) throws JitsException {
		parcel.getRoute().add(new Warehouse());

		if (parcel.getShippingType().equals(ShippingMethod.GRD)) {
		
			Router grdRouter = new GroundRouter();
			grdRouter.determineRoute(parcel);
		
		} else if (parcel.getShippingType().equals(ShippingMethod.AIR)) {
			
			Router airRouter = new AirportRouter();
			airRouter.determineRoute(parcel);
		
		}

		parcel.getRoute().add(new Destination(parcel.getAddress(), parcel.getToZip()));

		parcel.shipParcel();

	}

}
